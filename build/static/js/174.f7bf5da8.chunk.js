webpackJsonp([174],{93:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),l=a(o),i=n(11),r=a(i),u=n(199),c=a(u);t["default"]=function(e){var t=e.children,n=e.className,a=e.style;return l["default"].createElement("div",{className:(0,r["default"])(c["default"].page,n),style:a},t||"")}},1177:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,d["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s["default"]?(0,s["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),u=a(r),c=n(5),s=a(c),f=n(3),d=a(f),p=n(694),b=a(p),_=n(4),x=a(_),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,u["default"])(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=n(1),g=a(m),y=n(8),v=n(9),k=n(2282),C=a(k),w=n(10),E=a(w),I=n(93),S=a(I),T=n(24),D=n(23),N=a(D),A=n(84),H=a(A),R=n(16),G=a(R),W=n(17),P=a(W),F=function(e){function t(){var e,n,a,i;o(this,t);for(var r=arguments.length,u=Array(r),c=0;c<r;c++)u[c]=arguments[c];return n=a=l(this,(e=t.__proto__||(0,x["default"])(t)).call.apply(e,[this].concat(u))),a.state={waiting:!1,text:"发送验证码",captcha:"",captchaSent:!1},a.hideTel=function(e){return e=String(e),e.slice(0,3)+"****"+e.slice(7)},a.handleCaptchaInput=function(e){var t=e.target.value;+t>=0&&a.setState({captcha:t})},a.sendCaptcha=function(){a.props.sendCaptcha(a.props.mobile),a.setState({waiting:!0,captchaSent:!0}),a.countSeconds(60).then(function(){return a.setState({waiting:!1})})},a.countSeconds=function(e){return new b["default"](function(t){a.setState({text:e+"S后重新发送"});var n=setInterval(function(){--e?a.setState({text:e+"S后重新发送"}):(a.setState({text:"发送验证码"}),clearInterval(n),t())},1e3)})},i=n,l(a,i)}return i(t,e),h(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.mobile,n=e.load;t?""==t&&this.alert():n()}},{key:"alert",value:function(){var e=this,t=this.refs.alert;t.show({content:"您还没有绑定手机号",okText:"去绑定",okCallback:function(){e.props.push("/user/setting/mobileBind")}})}},{key:"componentWillReceiveProps",value:function(e){var t=e.mobile,n=e.sendCaptchaResCode,a=e.verifyResCode,o=e.verifyPending,l=this.refs.alert;t&&""==t&&this.alert(),300!==n||o||l.show({content:"发送验证码失败",okText:"确定"}),302!==n||o||l.show({content:"手机号已经被注册",okText:"确定"}),100!==a||o||this.props.push("/user/setting/mobileBindModify/new"),300!==a||o||l.show({content:"验证码错误，请重新输入验证码",okText:"确定"}),301!==a||o||l.show({content:"验证码失效，请重新获取验证码",okText:"确定"})}},{key:"loadDom",value:function(){return g["default"].createElement(G["default"],null)}},{key:"loadEnd",value:function(){var e=this,t=this.props,n=t.mobile,a=t.verifyCode,o=t.verifyPending;return g["default"].createElement("div",null,g["default"].createElement("p",{className:C["default"].p1},"原手机号"),g["default"].createElement("p",{className:C["default"].p2},this.hideTel(n)),g["default"].createElement("div",{className:C["default"].input},g["default"].createElement("span",null,"验证码"),g["default"].createElement("input",{ref:"input",type:"tel",placeholder:"请输入验证码",maxLength:6,value:this.state.captcha,onChange:this.handleCaptchaInput}),g["default"].createElement("button",{disabled:this.state.waiting,onClick:this.sendCaptcha},this.state.text)),g["default"].createElement("div",{className:C["default"].buttonWrap},g["default"].createElement("button",{disabled:this.state.captcha.length<6||!this.state.captchaSent,onClick:function(){return a(+n,+e.state.captcha)}},o&&g["default"].createElement(H["default"],{color:"rgba(255,255,255,.8)"}),"下一步")))}},{key:"render",value:function(){var e=this.props,t=e.mobile,n=e.pop,a=void 0;return t?""!=t&&(a=this.loadEnd()):a=this.loadDom(),g["default"].createElement(S["default"],null,g["default"].createElement("div",{className:C["default"].root},g["default"].createElement(E["default"],{onLeft:n},"修改绑定手机"),a,g["default"].createElement(N["default"],{ref:"alert"})))}}]),t}(g["default"].Component),M=function(e){return{mobile:e.infodata.getIn(["USER_INFO_WITH_LOGIN","data"])&&e.infodata.getIn(["USER_INFO_WITH_LOGIN","data"]).data.mobile||!1,sendCaptchaResCode:e.infodata.getIn([T.SEND_MSG,"data"])&&+e.infodata.getIn([T.SEND_MSG,"data"]).code||0,verifyResCode:e.infodata.getIn([T.CHECK_VERIFY_CAPTCHA,"data"])&&+e.infodata.getIn([T.CHECK_VERIFY_CAPTCHA,"data"]).code||0,verifyPending:e.infodata.getIn([T.CHECK_VERIFY_CAPTCHA,"pending"])}},O=function(e){return{push:function(t){e((0,v.push)(t))},load:function(){e({type:"USER_INFO_WITH_LOGIN"})},pop:function(){e((0,v.goBack)())},sendCaptcha:function(t){var n=Date.parse(new Date)/1e3,a=t+5+n+P["default"].key();e({type:T.SEND_MSG,params:[{mobile:t,type:5,clientTime:n,sign:P["default"].md5(a)}]})},verifyCode:function(t,n){e({type:T.CHECK_VERIFY_CAPTCHA,params:[{mobile:t,code:n}]})}}};t["default"]=(0,y.connect)(M,O)(F)},1707:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".root___1dsy1{height:100%;padding-top:44px}.p1___9HaTw{color:#888;margin-top:15px;padding-left:15px}.p2___3CFgv{font-size:20px;color:#e28233;text-align:center;margin-top:20px}.input___2-IDi{height:44px;border:1px solid #ddd;border-left:0;border-right:0;margin-top:15px;background-color:#fff;font-size:14px}.input___2-IDi,.input___2-IDi span{display:-webkit-box;display:-ms-flexbox;display:box;display:flex}.input___2-IDi span{-webkit-box-flex:90;-o-box-flex:90;box-flex:90;-ms-flex:90;flex:90;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center}.input___2-IDi input{border:none;-webkit-box-flex:175;-o-box-flex:175;box-flex:175;-ms-flex:175;flex:175}.input___2-IDi button{-webkit-box-flex:110;-o-box-flex:110;box-flex:110;-ms-flex:110;flex:110;background-color:#00a6e2;border:0;color:#fff;-webkit-transition:all .5s ease;transition:all .5s ease}.input___2-IDi button:disabled{background-color:#38caff}.buttonWrap___AXx2G{margin:20px 15px 0}.buttonWrap___AXx2G,.buttonWrap___AXx2G button{display:-webkit-box;display:-ms-flexbox;display:box;display:flex}.buttonWrap___AXx2G button{-webkit-box-flex:1;-o-box-flex:1;box-flex:1;-ms-flex:1;flex:1;background-color:#00a6e2;border-radius:3px;border:0;height:44px;color:#fff;-webkit-transition:all .5s ease;transition:all .5s ease;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center}.buttonWrap___AXx2G button:disabled{color:#e6e6e6;background-color:#38caff}",""]),t.locals={root:"root___1dsy1",p1:"p1___9HaTw",p2:"p2___3CFgv",input:"input___2-IDi",buttonWrap:"buttonWrap___AXx2G"}},2282:function(e,t,n){var a=n(1707);"string"==typeof a&&(a=[[e.id,a,""]]);n(7)(a,{});a.locals&&(e.exports=a.locals)}});