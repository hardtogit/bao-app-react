webpackJsonp([71],{958:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,c["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(_["default"]?(0,_["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(2),r=n(l),p=a(5),_=n(p),u=a(3),c=n(u),s=a(4),f=n(s),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r["default"])(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),g=a(1),h=n(g),x=a(9),b=a(8),v=a(10),E=n(v),D=a(40),T=n(D),w=a(21),I=n(w),y=a(50),k=n(y),A=a(19),N=a(2411),K=n(N),C=function(e){function t(e){o(this,t);var a=d(this,(t.__proto__||(0,f["default"])(t)).call(this,e));return a.componentWillReceiveProps=function(e){var t=e.address,n=e.cashData;t.length>0&&a.setState({addressId:t[0].id}),n&&300==n.code&&a.refs.alert.show({content:n.msg,okText:"确定"}),n&&100==n.code&&a.refs.alert.show({content:"兑换成功，请到兑换记录中查看！",okText:"确定"})},a.confirmBtn=function(){var e=a.props.params,t=e.product_id,n=e.num,o=a.props.address,d=a.state.addressId,i=sessionStorage.getItem("propertyStr");i=i.substring(0,i.length-2),o&&0==o.length?a.refs.alert.show({content:"请选择地址!",okText:"确定"}):a.refs.alert.show({content:"确认兑换该商品吗!",okText:"确定",okCallback:a.props.cashProduct(t,d,n,i)})},a.nullAddress=function(){return h["default"].createElement("div",{className:K["default"].nullDom},h["default"].createElement(A.Link,{to:"/find/addAddress"},h["default"].createElement("div",{className:K["default"].addAddress},"+添加地址")))},a.hasAddress=function(){var e=a.props.address,t=[];return e&&e.map(function(e,a){0==a&&t.push(h["default"].createElement("div",{className:K["default"].item,key:a},h["default"].createElement("p",{className:K["default"].name},e.consignee,h["default"].createElement("span",{className:K["default"].phone},e.phone)),h["default"].createElement("p",{className:K["default"].site},e.address),h["default"].createElement("div",{className:K["default"].eidt_bg},h["default"].createElement("div",{className:K["default"].delDiv},h["default"].createElement(A.Link,{to:"/find/address",style:{width:"50%"}},h["default"].createElement("span",{className:K["default"].editTxt},"更多地址>")))),h["default"].createElement("div",{className:K["default"].bottomBg})))}),h["default"].createElement("div",null,t)},a.produceDom=function(e){var t=e.image,n=(e.product_id,e.product_name),o=(e.product_info,e.price,e.alone_price),d=(e.stock,e.cash_limit_time,e.cash_limit_num,e.label_name,e.product_property),i=(e.down_time,e.server_time,a.props.params.num),l=sessionStorage.getItem("propertyStr"),r=l.split("||"),p=[];return r.map(function(e,t){if(t<r.length-1){var a=e.split("|");p.push(a[1])}}),h["default"].createElement("div",{className:K["default"].productInfo},h["default"].createElement("div",{className:K["default"].productImg},h["default"].createElement("img",{src:t})),h["default"].createElement("div",{className:K["default"].productDetail},h["default"].createElement("div",null,h["default"].createElement("p",{className:K["default"].nameTxt},n),h["default"].createElement("p",null,d&&d.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:item,t=e.type_name,a=(e.property_value,e.id,arguments[1]);return h["default"].createElement("span",{className:K["default"].nump,ref:"property"},t,"：",p[a])}))),h["default"].createElement("div",null,h["default"].createElement("p",{className:K["default"].proceTxt},o,"点币"),h["default"].createElement("p",{className:K["default"].numTxt},"*",i))))},a.state={flag:!0,addressId:""},a}return i(t,e),m(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this.props.params.product_id;this.props.getAddress(),this.props.productDetail(e),this.props.getVip()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.address,n=t.pop,o=t.productData,d=t.VipData,i=void 0,l=void 0,r=void 0,p=void 0,_=void 0;return o&&(l=this.produceDom(o.data)),i=0!=a.length?this.hasAddress():this.nullAddress(),d&&(r=d.data.coin_total,p=d.data.vip_level,_=d.data.discount_num),h["default"].createElement("div",{className:K["default"].bg},h["default"].createElement(E["default"],{onLeft:n,backgroundColor:"#fff",color:"#333"},"产品兑换"),h["default"].createElement(T["default"],null,i,l,h["default"].createElement("div",{className:K["default"].discount},"会员VIP",p,"级",_,"折优惠")),h["default"].createElement(I["default"],{ref:"alert"}),h["default"].createElement(k["default"],{ref:"confirm"}),h["default"].createElement("div",{className:K["default"].addBtnDiv},h["default"].createElement("p",{className:K["default"].coinNum},"您的当前可用点币：",r),h["default"].createElement("div",{className:K["default"].addBtn,onClick:function(){e.confirmBtn()}},"确认兑换")))}}]),t}(h["default"].Component),J=function(e){return e&&100==e.code?e.data:[]},B=function(e){return{address:J(e.infodata.getIn(["GET_ADDRESS_LIST","data"])),productData:e.infodata.getIn(["PRODUCT_DETAIL","data"]),VipData:e.infodata.getIn(["GET_VIP","data"]),cashData:e.infodata.getIn(["CASH_PRODUCT","data"])}},L=function(e){return{getAddress:function(){e({type:"GET_ADDRESS_LIST"})},cashProduct:function(t,a,n,o){e({type:"CASH_PRODUCT",params:[{product_id:t,address_id:a,num:n,product_property:o}]})},productDetail:function(t){e({type:"PRODUCT_DETAIL",params:[t]})},getVip:function(){e({type:"GET_VIP"})},pop:function(){e((0,b.goBack)())},push:function(t){e((0,b.push)(t))}}};t["default"]=(0,x.connect)(B,L)(C)},1548:function(e,t,a){t=e.exports=a(6)(),t.push([e.id,".bg___2dcqk{background:#f0eff5;position:absolute;left:0;top:0;width:100%;height:100vh;overflow:auto;padding-top:44px}.item___3YLXy{background:#fff;margin-bottom:10px}.name___9cxKE{padding:10px 15px;font-size:16px;color:#000}.phone___3CoJJ{float:right}.site___O-Ly0{line-height:24px;font-size:16px;color:#000;padding:0 15px}.eidt_bg___1bAui{position:relative;box-sizing:border-box;width:100%;height:34px;line-height:49px;padding:0 10px}.eidt_bg___1bAui span{display:inline-block}.eidt_bg___1bAui span.eidt___1QJbb{font-size:14px;color:#666;position:absolute;right:60px}.eidt_bg___1bAui span.del___1U9pK{font-size:14px;color:#666;position:absolute;right:15px}.add___1M2Kc{font-size:16px;color:#000;background:#fff;height:50px;line-height:50px;width:100%;padding-left:15px}.add___1M2Kc img{display:inline-block;width:18px;float:right;margin-right:15px;margin-top:10px}.do_default___1OHKT{font-size:14px;color:#666;position:relative;top:-40px;left:40px}.default___2PeUt{color:#fe684b}.nullDom___2vZN5{width:100%;height:100px;background-color:#fff;position:relative}.addAddress___3fYAe{width:120px;height:40px;border:1px solid #ccc;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;line-height:40px;color:#666}.addBtnDiv___3oaAY{position:absolute;bottom:20px;width:100%}.addBtn___3UC9F{width:80%;margin:0 auto;background-color:#fe684b;height:40px;line-height:40px;border-radius:20px;color:#fff;text-align:center}.coinNum___QgvXK{text-align:center;color:#fe684b;font-size:12px;padding:10px 0}.editImg___1EH47{float:right;margin-right:2px;width:20px}.editTxt___2KlbO{float:right;margin-right:15px;margin-left:2px;color:#666;font-size:14px}.deleteImg___2b1uJ{float:right;margin-right:5px;width:20px}.deleteTxt___16IZ3{float:right;margin-right:5px;margin-left:5px;color:#666;font-size:14px}.delDiv___1Qc8H{line-height:16px;padding:8px 0;float:right}.bottomBg___HLiJU{width:100%;height:5px;background-image:url("+a(1968)+");background-repeat:no-repeat}.productInfo___I1KEK{width:100%;height:100px;padding:0 10px;background-color:#fff;margin-top:7px}.productImg___2AdDZ{width:23%;height:100%;float:left;padding:10px}.productImg___2AdDZ img{width:60px}.productDetail___3wJo3{float:left;height:100%;width:75%}.nameTxt___1pXiq{padding-top:10px;padding-left:10px;height:40px}.productDetail___3wJo3 div{float:left}.nump___22jJl{font-size:12px;color:#666;padding-left:10px}.proceTxt___2eGL4{font-size:12px;color:#fe684b;margin-top:14px;margin-left:23px}.numTxt___PK5Tl{font-size:12px;color:#000;margin-top:10px;text-align:right;margin-left:23px}.discount___2CEhM{width:100%;background-color:#fff;height:46px;line-height:46px;margin-top:10px;color:#fe684b;font-size:16px;padding-left:20px}",""]),t.locals={bg:"bg___2dcqk",item:"item___3YLXy",name:"name___9cxKE",phone:"phone___3CoJJ",site:"site___O-Ly0",eidt_bg:"eidt_bg___1bAui",eidt:"eidt___1QJbb",del:"del___1U9pK",add:"add___1M2Kc",do_default:"do_default___1OHKT","default":"default___2PeUt",nullDom:"nullDom___2vZN5",addAddress:"addAddress___3fYAe",addBtnDiv:"addBtnDiv___3oaAY",addBtn:"addBtn___3UC9F",coinNum:"coinNum___QgvXK",editImg:"editImg___1EH47",editTxt:"editTxt___2KlbO",deleteImg:"deleteImg___2b1uJ",deleteTxt:"deleteTxt___16IZ3",delDiv:"delDiv___1Qc8H",bottomBg:"bottomBg___HLiJU",productInfo:"productInfo___I1KEK",productImg:"productImg___2AdDZ",productDetail:"productDetail___3wJo3",nameTxt:"nameTxt___1pXiq",nump:"nump___22jJl",proceTxt:"proceTxt___2eGL4",numTxt:"numTxt___PK5Tl",discount:"discount___2CEhM"}},1968:function(e,t,a){e.exports=a.p+"static/media/botbg.d849d296.png"},2411:[2567,1548]});