webpackJsonp([57],{37:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,_["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u["default"]?(0,u["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var d=a(2),l=n(d),s=a(5),u=n(s),c=a(3),_=n(c),f=a(4),p=n(f),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,l["default"])(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),h=a(1),m=n(h),x=a(39),b=n(x),v=function(e){function t(){return o(this,t),r(this,(t.__proto__||(0,p["default"])(t)).apply(this,arguments))}return i(t,e),g(t,[{key:"render",value:function(){var e=this.props.id;return m["default"].createElement("div",{className:b["default"].box+" "+this.props.className,id:e},this.props.children)}}]),t}(m["default"].Component);t["default"]=v},38:function(e,t,a){t=e.exports=a(6)(),t.push([e.id,".box___1dS0L{position:absolute;top:45px;right:0;bottom:0;left:0;height:auto;overflow-y:scroll;margin-top:-1px;padding:0;margin-bottom:-1px;width:auto;-webkit-overflow-scrolling:touch}.box___1dS0L::-webkit-scrollbar{display:none}",""]),t.locals={box:"box___1dS0L"}},39:[2320,38],314:function(e,t,a){e.exports=a.p+"static/media/gg_nochance.d6d80ba7.png"},470:function(e,t,a){t=e.exports=a(6)(),t.push([e.id,".bg___1cItl{padding-top:44px;position:absolute;left:0;top:0;width:100%;height:100vh;overflow:auto}.show___216di{display:block!important}.hide___3P8UL{display:none!important}.card_bg___35QQ6{position:absolute;width:100%;height:100%;top:0;z-index:2}.nullCard___2QruK{display:none;width:284px;height:142px;position:absolute;left:3px;top:2px;background:url("+a(314)+") no-repeat;background-size:100% 100%}.nullCard___2QruK img{display:block;width:45px;margin:20px auto}.nullCard___2QruK>.noChoose___3pc8B{font-size:25px;color:#775d54;text-align:center;padding-top:0}.nullCard___2QruK p{font-size:13px;color:#775d54;text-align:center;padding-top:8px}.box___LeO6b{left:0;height:100%}.box___LeO6b,.card_bg_img___EpTfD{position:absolute;top:0;width:100%}.card_bg_img___EpTfD{z-index:0}.card___1OgDv{position:absolute;top:340px;width:290px;margin-left:-145px;height:148px;left:50%;background:url("+a(485)+") 100% 100% no-repeat;background-size:290px 148px}.have_card___3OWq9,.no_card___wZ2lv{width:284px;margin-top:3px;margin-left:3px;height:142px;position:relative;z-index:10}.no_card___wZ2lv{display:none;background:url("+a(314)+") 100% 100% no-repeat;background-size:284px 142px}.no_card___wZ2lv img{width:45px;padding-top:20px;margin-left:118px}.no_card___wZ2lv h2{font-size:25px;color:#775d54;text-align:center;font-weight:500;font-family:-apple-system,Helvetica Neue,Roboto,Segoe UI,sans-serif;line-height:1.2}.no_card___wZ2lv p{font-size:13px;color:#775d54;text-align:center;padding-top:8px}.answer___29fPC{position:absolute;width:100%;height:100%;z-index:2;top:0;left:0;text-align:center}.answer___29fPC h2{font-size:23px;color:#fe6767;text-align:center;padding-top:40px}.answer___29fPC button.no_next___1i9Hr{display:none;background:#a7a4a5;position:absolute;left:50%;margin-left:-80px;top:70px}.answer___29fPC button.next___2v31W{display:none;background:#fe6767;position:absolute;left:50%;margin-left:-54px;top:70px}.answer___29fPC button{border:none;display:inline-block;padding:10px 20px;border-radius:4px;color:#fff;font-size:17px;margin-top:14px}.gg_b___1eseh{margin-top:500px;padding:0 15px;width:100%}.gg_b___1eseh .gg_line___3JxnS{border:2px dotted #d7d5d5}.gg_info___2EUKI{margin-top:15px}.gg_info___2EUKI span{font-size:13px;color:#fff}.gg_info___2EUKI span:last-child{float:right}.cardResult___106cY{position:absolute;width:100%;height:100%;z-index:1}.cardResText___2IPNf{position:absolute;left:50%;top:50%;font-size:23px;color:#fe6767;text-align:center;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.guaBox___3pYCZ{position:absolute;left:0;top:0;z-index:99}@media screen and (min-device-width:414px) and (-webkit-device-pixel-ratio:3){.card___1OgDv{top:420px}.gg_b___1eseh{margin-top:585px}}.rightNode___x1ITh{font-size:14px;color:#fff}",""]),t.locals={bg:"bg___1cItl",show:"show___216di",hide:"hide___3P8UL",card_bg:"card_bg___35QQ6",nullCard:"nullCard___2QruK",noChoose:"noChoose___3pc8B",box:"box___LeO6b",card_bg_img:"card_bg_img___EpTfD",card:"card___1OgDv",have_card:"have_card___3OWq9",no_card:"no_card___wZ2lv",answer:"answer___29fPC",no_next:"no_next___1i9Hr",next:"next___2v31W",gg_b:"gg_b___1eseh",gg_line:"gg_line___3JxnS",gg_info:"gg_info___2EUKI",cardResult:"cardResult___106cY",cardResText:"cardResText___2IPNf",guaBox:"guaBox___3pYCZ",rightNode:"rightNode___x1ITh"}},485:function(e,t,a){e.exports=a.p+"static/media/guaguamap.b11a9a9d.png"},557:function(e,t,a){var n=a(470);"string"==typeof n&&(n=[[e.id,n,""]]);a(7)(n,{});n.locals&&(e.exports=n.locals)},1077:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,f["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c["default"]?(0,c["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(2),s=o(l),u=a(5),c=o(u),_=a(3),f=o(_),p=a(4),g=o(p),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s["default"])(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=a(1),x=o(m),b=a(12),v=o(b),w=a(37),C=o(w),y=a(1714),E=o(y),N=a(557),R=o(N),k=a(8),S=o(k),I=a(1850),T=o(I),L=a(1792),z=o(L),P=a(11),O=a(32),D=n(O),B=a(21),A=a(10),U=a(1720),K=o(U),M=void 0,Q=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||(0,g["default"])(t)).call(this,e));return a.componentWillMount=function(){a.props.detail()},a.componentDidUpdate=function(){M=new Image,M.src=z["default"],M.onload=function(){a.state.showCanvas&&a.initCard()}},a.pdCardRes=function(e){if(e){var t=e.data;if(100==e.code){var n=t.name,o=t.amount;a.setState({cardResName:n,cardResAmount:o,fetch:!1}),a.setState({gua:!0})}else a.setState({cardResName:"获取刮刮卡失败",fetch:!1}),a.setState({gua:!0})}},a.initCard=function(){var e=document.body.style;e.mozUserSelect="none",e.webkitUserSelect="none";var t=300,n=152,o=!1,r=document.getElementById("guaCanvas"),i=document.getElementById("box");if(!r)return!1;var d=document.getElementById("card"),l=d.offsetLeft,s=d.offsetTop,u=r.getContext("2d"),c=function(){for(var e=a.state.fetch,o=u.getImageData(0,0,t,n).data,r=0,i=0;r<o.length;r+=4)o[r]&&o[r+1]&&o[r+2]&&o[r+3]&&i++;if(i<=t*n*.6&&!e){var d=a.props.cardInfo.newCards.length;return a.props.useCard(a.props.cardInfo.newCards[a.state.index].id),a.setState({fetch:!0}),a.setState({showCanvas:!1,index:a.state.index+1}),d<=parseInt(a.state.index+1)?a.setState({guaBtn:!0}):u.clearRect(0,0,t,n),!0}return!1},_=void 0,f=function(e){e.preventDefault(),_=i.scrollTop,o=!0},p=function(e){setTimeout(c,800),e.preventDefault(),o=!1},g=function(e){if(e.preventDefault(),o){e.changedTouches&&(e=e.changedTouches[e.changedTouches.length-1]);var t=(e.clientX+document.body.scrollLeft||e.pageX)-l||0,a=(e.clientY+_||e.pageY)-s||0;u.globalCompositeOperation="destination-out",u.beginPath(),u.arc(t,a,15,0,2*Math.PI),u.fill()}};u.drawImage(M,0,0,t,n),r.addEventListener("touchstart",f),r.addEventListener("touchend",p),r.addEventListener("touchmove",g),r.addEventListener("mousedown",f),r.addEventListener("mouseup",p),r.addEventListener("mousemove",g)},a.useNext=function(){a.setState({showCanvas:!0,fetch:!1,cardResName:"",cardResAmount:""})},a.state={showCanvas:!0,index:0,fetch:!1,cardResName:"",cardResAmount:"",guaBtn:!1},a}return d(t,e),h(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.fetch,a=e.userCard;t&&this.pdCardRes(a)}},{key:"render",value:function(){var e=this.state,t=e.cardResName,a=e.cardResAmount,n=e.guaBtn,o=e.index,r=(e.over,this.props.cardInfo),i=r.newCards.length;return 0!=o&&(i=r.newCards.length-o),x["default"].createElement("div",{className:R["default"].bg},x["default"].createElement(v["default"],{backgroundColor:"transparent",leftNode:x["default"].createElement("img",{src:E["default"],height:"20",width:"10",alt:""}),rightNode:x["default"].createElement(B.Link,{className:R["default"].rightNode,to:"/user/scratchesRule"},"规则"),onLeft:this.props.pop},"我的刮刮卡"),x["default"].createElement(C["default"],{className:R["default"].box,id:"box"},x["default"].createElement("img",{className:R["default"].card_bg_img,src:T["default"],alt:""}),x["default"].createElement("div",{className:R["default"].card_bg},x["default"].createElement("div",{id:"card",className:R["default"].card},r.newCards.length>0&&this.state.showCanvas&&x["default"].createElement("div",{id:"have_card",className:R["default"].have_card},x["default"].createElement("canvas",{id:"guaCanvas",style:{width:283,height:142},className:R["default"].guaBox})),x["default"].createElement("div",{className:R["default"].answer},x["default"].createElement("h2",null,t,a),x["default"].createElement("div",{className:(0,S["default"])(r.newCards.length<=0?R["default"].show:"",R["default"].nullCard)},x["default"].createElement("img",{src:K["default"]}),x["default"].createElement("h2",{className:R["default"].noChoose},"没有刮奖机会"),x["default"].createElement("p",null,"每周五投资即可参与刮奖!")),x["default"].createElement("button",{onClick:this.useNext,className:(0,S["default"])(r.newCards.length>0?R["default"].show:"",R["default"].next),disabled:n},"刮下一张"))),x["default"].createElement("div",{className:R["default"].gg_b},x["default"].createElement("p",{className:R["default"].gg_line}),x["default"].createElement("p",{className:R["default"].gg_info},x["default"].createElement("span",null,"您有",i,"次刮奖机会"),x["default"].createElement(B.Link,{to:"/user/guaguaList"},x["default"].createElement("span",null,"您已获得",r.rewardsTime,"次奖励>")))))))}}]),t}(x["default"].Component),Z=function(e){return e&&100===e.code?{newCards:e.data.luck_rewards||[],rewardsTime:e.data.rewards}:{newCards:[],rewardsTime:0}},j=function(e){return{cardInfo:Z(e.infodata.getIn([D.SCRATCHES_CARD_INFO,"data"])),userCard:e.infodata.getIn([D.SCRATCHES_CARD_USE,"data"])}},H=function(e){return{detail:function(){e({type:D.SCRATCHES_CARD_INFO})},useCard:function(t){e({type:D.SCRATCHES_CARD_USE,params:[t]})},pop:function(){e((0,A.goBack)())}}};t["default"]=(0,P.connect)(j,H)(Q)},1161:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(1077),r=n(o);t["default"]=r["default"]},1714:function(e,t,a){e.exports=a.p+"static/media/arrowtab.4dde4c61.png"},1720:function(e,t,a){e.exports=a.p+"static/media/cry.cc155451.png"},1792:function(e,t,a){e.exports=a.p+"static/media/gua.20c170b2.png"},1850:function(e,t,a){e.exports=a.p+"static/media/scratchebg.3f8da319.jpg"}});