webpackJsonp([13],{952:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,f["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c["default"]?(0,c["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=a(r),s=n(4),c=a(s),d=n(5),f=a(d),m=n(66),p=a(m),g=n(3),h=a(g),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,o["default"])(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),S=n(1),E=a(S),_=n(11),b=a(_),y=n(51),N=a(y),D=n(26),O=n(441),k=a(O),P=n(9),C=n(10),I=n(453),T=a(I),R=n(1816),L=a(R),U=n(1818),x=a(U),w=n(1815),B=a(w),M=n(23),H=a(M),F=n(38),j=a(F),J=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||(0,h["default"])(t)).call(this,e));return n.set=function(e){n.setState({signNumbers:e.signNumbers,coins:e.coins,isSign:e.isSign})},n.doSign=function(){n.refs.SignModel.show()},n.changeBar=function(e){n.setState({index:e})},n.loadDom=function(){return E["default"].createElement(H["default"],null)},n.ScrollDom=function(){var e=document.body.clientHeight-44-103-40,t=n.props,a=t.barData,l=t.getList,u=t.listData,i=t.pending,r=t.end,o=n.state.index,s=a.data.slice(0);return s.unshift({id:0,name:"全部"}),E["default"].createElement("div",null,s.map(function(t,n){var a=t.id;if(n==o){var s=u("SHOP_PRODUCT_LIST"+n),c=i("SHOP_PRODUCT_LIST"+n),d=r("SHOP_PRODUCT_LIST"+n);return E["default"].createElement("div",{key:n,className:k["default"].products},E["default"].createElement(j["default"],{height:e,fetch:function(){l("SHOP_PRODUCT_LIST"+n,a)},isLoading:c,distance:20,endType:d,endload:E["default"].createElement("div",null)},s&&s.map(function(e,t){var n=e.id,a=e.name,l=e.cover,u=e.price,i=e.count;return E["default"].createElement("div",{className:k["default"].productBox,key:t},0==i&&E["default"].createElement("div",{className:k["default"].dhOver})||null,E["default"].createElement(D.Link,{to:"/user/goodsDetail/"+n},E["default"].createElement("img",{className:k["default"].products_img,src:l,alt:a}),E["default"].createElement("p",{className:k["default"].name},a)),E["default"].createElement(D.Link,{to:"/user/trueExchangeConfirm/"+n},E["default"].createElement("p",{className:k["default"].money},E["default"].createElement("img",{src:B["default"]}),E["default"].createElement("span",null,u))))})))}}))},n.loadEndDom=function(){var e=n.state,t=e.coins,a=e.index,l=n.props.barData.data,u=n.ScrollDom();return E["default"].createElement(N["default"],null,E["default"].createElement("div",{className:k["default"].top},E["default"].createElement("img",{src:x["default"],alt:""}),E["default"].createElement("span",{className:k["default"].coins},t),E["default"].createElement("span",{className:k["default"].coins_desc},"当前点币"),E["default"].createElement("span",{className:k["default"].sign,onClick:!n.state.isSign&&n.doSign},n.state.isSign&&"已签到"||"签到")),E["default"].createElement("div",{className:k["default"].items},E["default"].createElement("div",{className:k["default"].scrollBar},E["default"].createElement("ul",{ref:"ul"},E["default"].createElement("li",{className:0==a&&k["default"].active||null,onClick:function(){n.changeBar(0)}},"全部"),l&&l.map(function(e,t){var l=(e.id,e.name);return E["default"].createElement("li",{key:t,className:a==t+1&&k["default"].active||null,onClick:function(){n.changeBar(t+1)}},l)})))),u)},n.signSuccess=function(e){n.setState({isSign:!0,coins:e.data.coins});var t=JSON.parse(sessionStorage.getItem("bao-user"));t.isSign=!0,t.coins=e.data.coins,sessionStorage.setItem("bao-user",(0,p["default"])(t)),n.refs.SignModel.hide()},n.qdDom=function(){var e=n.state,t=e.coins,a=e.signNumbers,l=e.isSign;return E["default"].createElement(T["default"],{ref:"SignModel",coin:+t,days:+a,sign:l,callBackFun:function(e){n.signSuccess(e)}})},n.state={signNumbers:"",coins:"",isSign:"",index:0,id:0},n}return i(t,e),v(t,[{key:"componentWillMount",value:function(){var e=JSON.parse(sessionStorage.getItem("bao-user"));e?this.set(e):this.props.getUser(),this.props.productBar()}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=e.user;t&&100==t.code&&this.set(t.data)}},{key:"render",value:function(){var e=this,t=this.state.coins,n=this.props.barData,a=this.loadDom(),l=void 0;return n&&(t||0==t)&&(a=this.loadEndDom(),l=this.qdDom()),E["default"].createElement("div",{className:k["default"].bg},E["default"].createElement(b["default"],{rightNode:E["default"].createElement(D.Link,{to:"/user/shopCenter"},E["default"].createElement("img",{src:L["default"],className:k["default"].rightNode})),backgroundColor:"#F76260",onLeft:function(){e.props.push("/home/myIndex")}},"积分商城"),l,a)}}]),t}(E["default"].Component),W=function(e){return{barData:e.infodata.getIn(["SHOP_PRODUCT_BAR","data"]),listData:function(t){return e.listdata.getIn([t,"data"])},pending:function(t){return e.listdata.getIn([t,"pending"])},end:function(t){return e.listdata.getIn([t,"pageEnd"])},user:e.infodata.getIn(["USER_INFO","data"])}},q=function(e){return{productBar:function(){e({type:"SHOP_PRODUCT_BAR"})},push:function(t){e((0,C.push)(t))},getList:function(t,n){e({type:"SHOP_PRODUCT_LIST",OtherKey:t,params:[10,2,n]})},getUser:function(){e({type:"USER_INFO"})}}};t["default"]=(0,P.connect)(W,q)(J)},1018:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(952),u=a(l);t["default"]=u["default"]},1815:function(e,t,n){e.exports=n.p+"static/media/icon.3dd6b26b.png"},1816:function(e,t,n){e.exports=n.p+"static/media/shoppCenter.5dd2b489.png"},1818:function(e,t,n){e.exports=n.p+"static/media/total.3a64f443.png"}});