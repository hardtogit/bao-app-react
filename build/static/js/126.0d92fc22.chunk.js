webpackJsonp([126],{20:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,m["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f["default"]?(0,f["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,d,u=a(2),s=n(u),p=a(5),f=n(p),c=a(3),m=n(c),_=a(4),h=n(_),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,s["default"])(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),v=a(1),g=n(v),x=a(11),E=n(x),y=a(22),w=n(y),D=a(12),k=n(D),M=(d=i=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||(0,h["default"])(t)).call(this,e));return a.state={disable:!0,message:""},a}return l(t,e),b(t,[{key:"open",value:function(e,t){var a=this;this.setState({disable:!1,message:e}),this.interval&&clearInterval(this.interval),this.interval=setInterval(function(){a.setState({disable:!0}),t&&"function"==typeof t&&t()},2e3)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return this.state.disable?null:g["default"].createElement("div",{className:(0,E["default"])(w["default"].Tipbar,this.props.className)},g["default"].createElement("span",{className:w["default"].text},this.state.message||this.props.text))}}]),t}(g["default"].Component),i.propTypes={text:k["default"].string},d);t["default"]=M},21:function(e,t,a){t=e.exports=a(6)(),t.push([e.id,".Tipbar___3HZ5q{position:fixed;top:44px;width:100%;height:45px;background-color:#7b0002;color:#fff}.Tipbar___3HZ5q .text___KcEzd{display:block;line-height:45px;text-align:center}",""]),t.locals={Tipbar:"Tipbar___3HZ5q",text:"text___KcEzd"}},22:[2363,21],1095:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,f["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s["default"]?(0,s["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),d=n(i),u=a(5),s=n(u),p=a(3),f=n(p),c=a(35),m=n(c),_=a(4),h=n(_),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,d["default"])(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),v=a(1),g=n(v),x=a(10),E=n(x),y=a(31),w=n(y),D=a(2233),k=n(D),M=a(25),T=n(M),C=a(9),I=a(8),N=a(24),S=n(N),A=a(20),z=n(A),F=a(17),Q=n(F),R=a(16),P=n(R),H=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||(0,h["default"])(t)).call(this,e));return a.changeInput=function(e){var t=e.target.value,n=/^\d+(\.\d{1,2})?$/;n.test(t)?t>parseFloat(a.state.demand)?(a.openTipber("超出最大金额！"),a.set(t,!0)):t>0?a.set(t,!1):(a.openTipber("金额必须大于0!"),a.set(t,!0)):(a.openTipber("请输入正确的金额"),a.set(t,!0))},a.set=function(e,t){a.setState({money:e,disable:t})},a.setPwd=function(e){var t=e.target.value;a.setState({pwd:t})},a.show=function(){var e=a.state.money;a.setState({pwd:""}),a.refs.alert.show({title:"赎回",content:g["default"].createElement("div",{className:k["default"].redeem},g["default"].createElement("p",null,"￥",parseFloat(e).toFixed(2)),g["default"].createElement("div",null,g["default"].createElement("input",{placeholder:"请输入交易密码",type:"password",onChange:a.setPwd}))),cancel:"忘记密码",okText:g["default"].createElement("button",{className:k["default"].suerBtn},"确定"),close:!0,cancelCallback:function(){a.props.push("/user/setting/tradePasswordForget")},okCallback:a.submit})},a.submit=function(){var e=a.state,t=e.pwd,n=e.money,o=!/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(t)&&/^\S{6,16}$/.test(t);return o?void a.props.submit(n,Q["default"].md5(t)):(a.openTipber("请输入正确的交易密码"),!0)},a.openTipber=function(e){a.refs.tipbar.open(e)},a.loadDom=function(){return g["default"].createElement(P["default"],null)},a.loadEndDom=function(){var e=a.state,t=e.demand,n=e.freeQuota,o=e.disable;return t||(t=a.props.datas.data.total,n=a.props.datas.data.freeQuota,sessionStorage.setItem("bao-demand",(0,m["default"])(a.props.datas.data))),g["default"].createElement("div",{className:k["default"].demandContent},g["default"].createElement("div",{className:k["default"].reddemMain},g["default"].createElement("p",null,"赎回到余额"),g["default"].createElement("p",null,"赎回金额（元）"),g["default"].createElement("p",null,g["default"].createElement("span",null,"￥"),g["default"].createElement("input",{type:"text",placeholder:"请输入赎回金额",value:a.state.money,onChange:a.changeInput})),g["default"].createElement("p",null,"零钱宝资产",t,"元",g["default"].createElement("label",null,"本月还有",n,"次免费赎回机会"))),g["default"].createElement("p",{className:k["default"].reddemHint},"每月前5次免手续费，之后每次收取0.25%手续费"),g["default"].createElement(w["default"],{className:"111",disable:o,text:"下一步",onClick:a.show,status:o&&"disable"||""}))},a.state={money:"",disable:!0,pwd:"",demand:"",freeQuota:""},a}return l(t,e),b(t,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("bao-demand");if(e){var t=JSON.parse(e);this.setState({demand:t.total,freeQuota:t.freeQuota})}else this.props.load()}},{key:"componentWillReceiveProps",value:function(e){var t=e.submitCode,a=e.push;if(t)if(100==t.code){sessionStorage.setItem("bao-reddem",(0,m["default"])(t.data));var n=JSON.parse(sessionStorage.getItem("bao-demand"));n.total=parseFloat(n.total)-this.state.money,n.freeQuota>0&&n.freeQuota--,sessionStorage.setItem("bao-demand",(0,m["default"])(n)),a("/user/reddemSuccese")}else this.refs.tipbar.open("对不起密码错误")}},{key:"componentWillUnmount",value:function(){this.props.clearData()}},{key:"render",value:function(){var e=this.props,t=e.pop,a=e.datas,n=this.loadDom();return(this.state.demand||a)&&(n=this.loadEndDom()),g["default"].createElement("div",{className:k["default"].bg},g["default"].createElement(E["default"],{onLeft:t},"零钱宝赎回"),n,g["default"].createElement(S["default"],{ref:"alert"}),g["default"].createElement("div",{className:k["default"].tipbar},g["default"].createElement(z["default"],{ref:"tipbar"})))}}]),t}(g["default"].Component),O=function(e){return{submitCode:e.infodata.getIn(["REDEEM","data"]),datas:e.infodata.getIn(["DEMAND_ACCOUNT_DETAIL","data"])}},j=function(e){return{pop:function(){e((0,I.goBack)())},push:function(t){e((0,I.push)(t))},submit:function(t,a){e({type:"REDEEM",params:[{amount:t,password:a}]})},clearData:function(){e({type:"CLEAR_INFO_DATA",key:"REDEEM"})},load:function(){e({type:"DEMAND_ACCOUNT_DETAIL"})}}};t["default"]=(0,C.connect)(O,j)((0,T["default"])(H))},1655:function(e,t,a){t=e.exports=a(6)(),t.push([e.id,".bg___1Kjlt{background:#f0eff5;position:absolute;left:0;top:0;width:100%;height:100%;overflow:auto}.demandContent___2tP9e{margin-top:44px;width:100%;padding:15px 15px 0}.reddemMain___1eD5i{width:100%;background:#fff;height:236px;border-radius:0 0 5px 5px;padding:0 20px}.reddemMain___1eD5i p:nth-child(1){font-size:16px;color:#aaa;padding:20px 0}.reddemMain___1eD5i p:nth-child(2){font-size:16px;color:#000;padding:20px 0}.reddemMain___1eD5i p:nth-child(3){padding:20px 0 10px}.reddemMain___1eD5i p:nth-child(3) span{font-size:24px;color:#000}.reddemMain___1eD5i p:nth-child(3) input{font-size:18px;color:#000;width:80%;border:none;vertical-align:baseline}.reddemMain___1eD5i p:nth-child(4){font-size:14px;color:#888;padding:20px 0;border-top:1px solid #e4e4e4}.reddemMain___1eD5i p:nth-child(4) label{font-size:12px;color:#00a6e2;float:right}.redeem___3tAiI p{font-size:25px;color:#ff7701;text-align:center}.redeem___3tAiI input{width:100%;border:1px solid #40b3e6;height:40px;padding:0 0 0 10px;margin-top:10px;box-shadow:none}.suerBtn___13yQ4{color:#00a6e2}.tipbar___UMkiv{position:absolute;left:0;top:0;width:100%;z-index:9999}.reddemHint___d7LRY{font-size:12px;color:#aaa;text-align:center;padding:6px 0 8px}",""]),t.locals={bg:"bg___1Kjlt",demandContent:"demandContent___2tP9e",reddemMain:"reddemMain___1eD5i",redeem:"redeem___3tAiI",suerBtn:"suerBtn___13yQ4",tipbar:"tipbar___UMkiv",reddemHint:"reddemHint___d7LRY"}},2233:function(e,t,a){var n=a(1655);"string"==typeof n&&(n=[[e.id,n,""]]);a(7)(n,{});n.locals&&(e.exports=n.locals)}});