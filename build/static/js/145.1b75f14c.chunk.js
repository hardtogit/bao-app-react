webpackJsonp([145],{37:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=(0,_["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(p["default"]?(0,p["default"])(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=a(2),d=n(r),u=a(5),p=n(u),s=a(3),_=n(s),c=a(4),f=n(c),m=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,d["default"])(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),g=a(1),h=n(g),x=a(39),b=n(x),v=function(t){function e(){return o(this,e),i(this,(e.__proto__||(0,f["default"])(e)).apply(this,arguments))}return l(e,t),m(e,[{key:"render",value:function(){var t=this.props.id;return h["default"].createElement("div",{className:b["default"].box+" "+this.props.className,id:t},this.props.children)}}]),e}(h["default"].Component);e["default"]=v},38:function(t,e,a){e=t.exports=a(6)(),e.push([t.id,".box___1dS0L{position:absolute;top:45px;right:0;bottom:0;left:0;height:auto;overflow-y:scroll;margin-top:-1px;padding:0;margin-bottom:-1px;width:auto;-webkit-overflow-scrolling:touch}.box___1dS0L::-webkit-scrollbar{display:none}",""]),e.locals={box:"box___1dS0L"}},39:[2320,38],977:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=(0,_["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(p["default"]?(0,p["default"])(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(2),d=n(r),u=a(5),p=n(u),s=a(3),_=n(s),c=a(4),f=n(c),m=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,d["default"])(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),g=a(1),h=n(g),x=a(11),b=a(10),v=a(12),E=n(v),w=a(37),y=n(w),D=a(26),T=n(D),k=a(69),I=n(k),S=a(21),N=a(2144),A=n(N),C=function(t){function e(t){o(this,e);var a=i(this,(e.__proto__||(0,f["default"])(e)).call(this,t));return a.confirmBtn=function(){var t=a.props.params,e=t.product_id,n=t.num,o=a.props,i=o.address;o.cashData;a.setState({flag:!1});var l=void 0;i.length>0&&(l=i[0].id);var r=sessionStorage.getItem("propertyStr");r=r.substring(0,r.length-2),i&&0==i.length?a.refs.alert.show({content:"请选择地址!",okText:"确定"}):a.props.cashProduct(e,l,n,r)},a.nullAddress=function(){return h["default"].createElement("div",{className:A["default"].nullDom},h["default"].createElement(S.Link,{to:"/find/addAddress"},h["default"].createElement("div",{className:A["default"].addAddress},"+添加地址")))},a.hasAddress=function(){var t=a.props.address,e=[];return t&&t.map(function(t,a){0==a&&e.push(h["default"].createElement("div",{className:A["default"].item,key:a},h["default"].createElement("p",{className:A["default"].name},t.consignee,h["default"].createElement("span",{className:A["default"].phone},t.phone)),h["default"].createElement("p",{className:A["default"].site},t.address),h["default"].createElement("div",{className:A["default"].eidt_bg},h["default"].createElement("div",{className:A["default"].delDiv},h["default"].createElement(S.Link,{to:"/find/address",style:{width:"50%"}},h["default"].createElement("span",{className:A["default"].editTxt},"更多地址>")))),h["default"].createElement("div",{className:A["default"].bottomBg})))}),h["default"].createElement("div",null,e)},a.produceDom=function(t){var e=t.image,n=(t.product_id,t.product_name),o=(t.product_info,t.price,t.alone_price),i=(t.stock,t.cash_limit_time,t.cash_limit_num,t.label_name,t.product_property),l=(t.down_time,t.server_time,a.props.params.num),r=sessionStorage.getItem("propertyStr"),d=r.split("||"),u=[];return d.map(function(t,e){if(e<d.length-1){var a=t.split("|");u.push(a[1])}}),h["default"].createElement("div",null,h["default"].createElement("div",{className:A["default"].productInfo},h["default"].createElement("div",{className:A["default"].productImg},h["default"].createElement("img",{src:e})),h["default"].createElement("div",{className:A["default"].productDetail},h["default"].createElement("div",null,h["default"].createElement("p",{className:A["default"].nameTxt},n),h["default"].createElement("p",null,i&&i.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:item,e=t.type_name,a=(t.property_value,t.id,arguments[1]);return h["default"].createElement("p",{className:A["default"].nump,ref:"property"},e,"：",u[a])}))),h["default"].createElement("div",null,h["default"].createElement("p",{className:A["default"].numTxt},"*",l)))),h["default"].createElement("div",{className:A["default"].discount},h["default"].createElement("span",null,"商品合计"),h["default"].createElement("span",null,o,"点币")))},a.state={flag:!0},a}return l(e,t),m(e,[{key:"componentWillMount",value:function(){this.props.clearData("CASH_PRODUCT")}},{key:"componentDidMount",value:function(){var t=this.props.params.product_id;this.props.getAddress(),this.props.productDetail(t),this.props.getVip()}},{key:"componentWillReceiveProps",value:function(t){var e=this,a=this.state.flag,n=t.cashData;n&&300==n.code&&!a&&this.refs.alert.show({content:n.msg,okText:"确定",okCallback:function(){e.setState({flag:!0})}}),n&&100==n.code&&!a&&this.refs.alert.show({content:"兑换成功，请到兑换记录中查看！",okText:"确定",okCallback:function(){e.setState({flag:!0}),e.props.pop()}})}},{key:"render",value:function(){var t=this,e=this.props,a=e.address,n=e.pop,o=e.productData,i=e.VipData,l=(e.cashData,void 0),r=void 0,d=void 0,u=void 0,p=void 0;o&&(r=this.produceDom(o.data));var s=sessionStorage.getItem("isCoupon");return 0==s&&(l=0!=a.length?this.hasAddress():this.nullAddress()),i&&(d=i.data.coin_total,u=i.data.vip_level,p=i.data.discount_num),h["default"].createElement("div",{className:A["default"].bg},h["default"].createElement(E["default"],{onLeft:n,backgroundColor:"#fff",color:"#333"},"产品兑换"),h["default"].createElement(y["default"],null,l,r,h["default"].createElement("div",{className:A["default"].discount},10==p&&"当前等级无优惠"||"会员VIP"+u+"级"+p+"折优惠")),h["default"].createElement("div",{className:A["default"].addBtnDiv},h["default"].createElement("p",{className:A["default"].coinNum},"您的当前可用点币：",d),h["default"].createElement("div",{className:A["default"].addBtn,onClick:function(){t.confirmBtn()}},"确认兑换")),h["default"].createElement(T["default"],{ref:"alert"}),h["default"].createElement(I["default"],{ref:"confirm"}))}}]),e}(h["default"].Component),B=function(t){return t&&100==t.code?t.data:[]},z=function(t){return{address:B(t.infodata.getIn(["GET_ADDRESS_LIST","data"])),productData:t.infodata.getIn(["PRODUCT_DETAIL","data"]),VipData:t.infodata.getIn(["GET_VIP","data"]),cashData:t.infodata.getIn(["CASH_PRODUCT","data"])}},P=function(t){return{getAddress:function(){t({type:"GET_ADDRESS_LIST"})},cashProduct:function(e,a,n,o){t({type:"CASH_PRODUCT",params:[{product_id:e,address_id:a,num:n,product_property:o}]})},productDetail:function(e){t({type:"PRODUCT_DETAIL",params:[e]})},getVip:function(){t({type:"GET_VIP"})},pop:function(){t((0,b.goBack)())},push:function(e){t((0,b.push)(e))},clearData:function(e){t({type:"CLEAR_DATA",key:e})}}};e["default"]=(0,x.connect)(z,P)(C)},1544:function(t,e,a){e=t.exports=a(6)(),e.push([t.id,".bg___2QIzl{background:#f0eff5;position:absolute;left:0;top:0;width:100%;height:100vh;overflow:auto;padding-top:44px}.item___2Z6gV{background:#fff;margin-bottom:10px}.name___2ZmeJ{padding:10px 15px;font-size:16px;color:#000}.phone___13npt{float:right}.site___313vy{line-height:24px;font-size:16px;color:#000;padding:0 15px}.eidt_bg___1e4w8{position:relative;box-sizing:border-box;width:100%;height:34px;line-height:49px;padding:0 10px}.eidt_bg___1e4w8 span{display:inline-block}.eidt_bg___1e4w8 span.eidt___1nKMu{font-size:14px;color:#666;position:absolute;right:60px}.eidt_bg___1e4w8 span.del___1iZw8{font-size:14px;color:#666;position:absolute;right:15px}.add___E7T_m{font-size:16px;color:#000;background:#fff;height:50px;line-height:50px;width:100%;padding-left:15px}.add___E7T_m img{display:inline-block;width:18px;float:right;margin-right:15px;margin-top:10px}.do_default___1Cay4{font-size:14px;color:#666;position:relative;top:-40px;left:40px}.default___8Ps-Z{color:#fe684b}.nullDom___2wydb{width:100%;height:100px;background-color:#fff;position:relative}.addAddress___lJowY{width:120px;height:40px;border:1px solid #ccc;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;line-height:40px;color:#666}.addBtnDiv___1-toQ{position:absolute;bottom:20px;width:100%}.addBtn___3X06_{width:80%;margin:0 auto;background-color:#fe684b;height:40px;line-height:40px;border-radius:20px;color:#fff;text-align:center}.coinNum___2iWta{text-align:center;color:#fe684b;font-size:12px;padding:10px 0}.editImg___2sV_X{float:right;margin-right:2px;width:20px}.editTxt___2Dn-v{float:right;margin-right:15px;margin-left:2px;color:#666;font-size:14px}.deleteImg___sIxye{float:right;margin-right:5px;width:20px}.deleteTxt___1U-5U{float:right;margin-right:5px;margin-left:5px;color:#666;font-size:14px}.delDiv___1SgiS{line-height:16px;padding:8px 0;float:right}.bottomBg___2uCir{width:100%;height:5px;background-image:url("+a(1727)+");background-repeat:no-repeat}.productInfo___2EOis{width:100%;height:100px;padding:0 10px;background-color:#fff;margin-top:7px}.productImg___9KS6B{width:23%;height:100%;float:left;padding:10px}.productImg___9KS6B img{width:60px}.productDetail___3rG-T{float:left;height:100%;width:75%}.nameTxt___pnK4L{padding-top:10px;padding-left:10px;height:40px}.productDetail___3rG-T div{float:left}.productDetail___3rG-T div:nth-child(2){margin-top:3px;margin-left:24px}.nump___2Kag3{font-size:12px;color:#666;padding-left:10px;margin-top:4px}.proceTxt___26eMa{font-size:12px;color:#fe684b;margin-top:14px;margin-left:23px}.numTxt___1nDFK{font-size:12px;color:#000;margin-top:10px;text-align:right;margin-left:23px}.discount___jRlAj{width:100%;background-color:#fff;height:46px;line-height:46px;margin-top:10px;color:#fe684b;font-size:16px;padding-left:20px}.discount___jRlAj span:first-child{float:left;color:#666}.discount___jRlAj span:nth-child(2){float:right;margin-right:20px}",""]),e.locals={bg:"bg___2QIzl",item:"item___2Z6gV",name:"name___2ZmeJ",phone:"phone___13npt",site:"site___313vy",eidt_bg:"eidt_bg___1e4w8",eidt:"eidt___1nKMu",del:"del___1iZw8",add:"add___E7T_m",do_default:"do_default___1Cay4","default":"default___8Ps-Z",nullDom:"nullDom___2wydb",addAddress:"addAddress___lJowY",addBtnDiv:"addBtnDiv___1-toQ",addBtn:"addBtn___3X06_",coinNum:"coinNum___2iWta",editImg:"editImg___2sV_X",editTxt:"editTxt___2Dn-v",deleteImg:"deleteImg___sIxye",deleteTxt:"deleteTxt___1U-5U",delDiv:"delDiv___1SgiS",bottomBg:"bottomBg___2uCir",productInfo:"productInfo___2EOis",productImg:"productImg___9KS6B",productDetail:"productDetail___3rG-T",nameTxt:"nameTxt___pnK4L",nump:"nump___2Kag3",proceTxt:"proceTxt___26eMa",numTxt:"numTxt___1nDFK",discount:"discount___jRlAj"}},1727:function(t,e,a){t.exports=a.p+"static/media/botbg.d849d296.png"},2144:function(t,e,a){var n=a(1544);"string"==typeof n&&(n=[[t.id,n,""]]);a(7)(n,{});n.locals&&(t.exports=n.locals)}});