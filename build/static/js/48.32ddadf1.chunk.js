webpackJsonp([48],{163:function(e,t,o){e.exports=o.p+"static/media/private2.47e3ef01.png"},951:function(e,t,o){"use strict";function _(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,o){return t in e?(0,p["default"])(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,c["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u["default"]?(0,u["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(2),p=_(i),d=o(5),u=_(d),m=o(3),c=_(m),f=o(41),s=_(f),g=o(31),h=_(g),x=o(4),b=_(x),I=function(){function e(e,t){for(var o=0;o<t.length;o++){var _=t[o];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),(0,p["default"])(e,_.key,_)}}return function(t,o,_){return o&&e(t.prototype,o),_&&e(t,_),t}}(),v=o(1),y=_(v),T=o(10),D=_(T),E=(o(19),o(2328)),N=_(E),R=o(9),w=o(8),S=o(17),k=_(S),C=o(22),B=(_(C),o(18)),z=_(B),L=o(21),V=_(L),F=o(1980),H=(_(F),o(163)),j=_(H),M=o(14),Q=_(M),O=function(e){function t(e){n(this,t);var o=r(this,(t.__proto__||(0,b["default"])(t)).call(this,e));return o.handleChange1=function(e){o.setState({num:e.target.value})},o.changeBar=function(e,t,_){e<0?o.refs.alert.show({content:"数目不能小于0!",okText:"确定"}):e>t?o.refs.alert.show({content:"每人只限购"+t+"件!",okText:"确定"}):e>_?o.refs.alert.show({content:"商品库存不足!",okText:"确定"}):o.setState({num:e})},o.remove=function(){sessionStorage.removeItem("bao-product"),o.props.clearData()},o.dataInspect=function(){var e=sessionStorage.getItem("bao-product"),t=o.props.params.id;return!(!e||JSON.parse(e).id!=t)},o.setData=function(){var e=o.props.infoData.data;sessionStorage.setItem("bao-product",(0,h["default"])(e))},o.loadDom=function(){return y["default"].createElement(k["default"],null)},o.choose=function(e,t){var _=void 0;o.setState(function(o){_=(0,s["default"])(o.params,a({},e,t))})},o.confirm=function(e,t){for(var _=o.state,a=_.params,n=_.num,r=(_.type_name,[]),l="",i=0;i<a.length;i++)"undefined"!=typeof a[i]&&(r.push(a[i]),l=l+i+"|"+a[i]+"||");r.length<t.length?o.refs.alert.show({content:"请选择商品属性！！",okText:"确定"}):(sessionStorage.setItem("propertyStr",l),o.props.push("/find/productCash/"+e+"/"+n))},o.loadEndDom=function(e){var t=o.state,_=t.num,a=t.params,n=e.image,r=(e.product_id,e.product_name),l=e.product_info,i=e.price,p=e.alone_price,d=e.stock,u=(e.cash_limit_time,e.cash_limit_num),m=(e.label_name,e.product_property),c=e.down_time,f=e.server_time,s=z["default"].millisecondToDate(c-f);return y["default"].createElement("div",null,y["default"].createElement(D["default"],{backgroundColor:"#fff",color:"#333",onLeft:o.props.pop},r),y["default"].createElement("div",{className:N["default"].goodsTop},y["default"].createElement("div",{className:N["default"].goodsImg},y["default"].createElement("img",{src:n,className:N["default"].productImg}),y["default"].createElement("div",{className:N["default"].numDiv},y["default"].createElement("div",{className:N["default"].dayNum},"距结束",s))),y["default"].createElement("div",{className:N["default"].proTitle},y["default"].createElement("p",{className:N["default"].titleTop},y["default"].createElement("span",{className:N["default"].titieTxt},r),y["default"].createElement("span",{className:N["default"].limitTxt},"每人每天限购",u,"件")),y["default"].createElement("p",{className:N["default"].titleBottom},y["default"].createElement("span",{className:N["default"].priceTxt},p,"点币"),y["default"].createElement("img",{src:j["default"],className:N["default"].priceImg}),y["default"].createElement("span",{className:N["default"].priceTxt1},i,"点币")))),y["default"].createElement("div",{className:N["default"].propertyDiv},y["default"].createElement("p",{className:N["default"].num1},"库存：",y["default"].createElement("span",{className:N["default"].num2},d)),y["default"].createElement("p",{className:N["default"].numSelect},y["default"].createElement("span",{onClick:function(){o.changeBar(_-1)}},"-"),y["default"].createElement("input",{type:"text",className:N["default"].productNum,value:o.state.num,onChange:o.handleChange1}),y["default"].createElement("span",{onClick:function(){o.changeBar(_+1,u,d)}},"+")),m&&m.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:item,t=e.type_name,_=e.property_value,n=e.id,r=arguments[1];return y["default"].createElement("div",{className:N["default"].propertyItem,key:r},y["default"].createElement("p",{className:N["default"].nump,ref:"property"},t,"：",y["default"].createElement("span",{className:N["default"].num2},a[n]&&a[n]||"选择")),y["default"].createElement("p",{className:N["default"].propertyValue},_.split("|").map(function(e,t){return y["default"].createElement("span",{key:t,onClick:function(){o.choose(n,e)},className:(0,Q["default"])(a[n]==e?N["default"].current:"")},e)})))})),y["default"].createElement("div",{className:N["default"].detailImg},y["default"].createElement("p",{className:N["default"].infoTitle},"商品详情"),y["default"].createElement("div",{dangerouslySetInnerHTML:{__html:l},className:N["default"].infoContent})))},o.state={flag:!1,num:1,params:[],init:!1,index:0},o.handleChange1=o.handleChange1.bind(o),o}return l(t,e),I(t,[{key:"componentWillMount",value:function(){this.props.getVip(),this.remove();var e=this.dataInspect();if(!e){var t=this.props.params.id;this.props.productDetail(t)}}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=e.infoDate,o={};t&&100==t.code&&!this.state.init&&(t.data.product_property.map(function(e){var t=e.id;o[t]=""}),this.setState({params:o}))}},{key:"render",value:function(){var e=this,t=this.props,o=t.infoData,_=t.VipData,a=void 0,n=this.dataInspect(),r=void 0;return _&&o?(r=this.loadEndDom(o.data),this.setData(),a=_.data.coin_total>o.data.alone_price):r=this.loadDom(),n&&(r=this.loadEndDom()),y["default"].createElement("div",{className:N["default"].bg},r,y["default"].createElement(V["default"],{ref:"alert"}),y["default"].createElement("div",{className:a&&N["default"].Botton||N["default"].none},y["default"].createElement("p",{onClick:function(){e.confirm(o.data.product_id,o.data.product_property)}},"确认兑换")),y["default"].createElement("div",{className:!a&&N["default"].BottonNo||N["default"].none},y["default"].createElement("p",null,"点币不足")))}}]),t}(y["default"].Component),P=function(e){return{infoData:e.infodata.getIn(["PRODUCT_DETAIL","data"]),VipData:e.infodata.getIn(["GET_VIP","data"])}},Y=function(e){return{pop:function(){e((0,w.goBack)())},productDetail:function(t){e({type:"PRODUCT_DETAIL",params:[t]})},push:function(t){e((0,w.push)(t))},clearData:function(){e({type:"CLEAR_INFO_DATA",key:"PRODUCT_DETAIL"})},getVip:function(){e({type:"GET_VIP"})}}};t["default"]=(0,R.connect)(P,Y)(O)},1461:function(e,t,o){t=e.exports=o(6)(),t.push([e.id,".bg___7ImRl{background:#f6f6f9;position:absolute;left:0;top:0;overflow:auto;width:100%;height:100vh;padding-top:44px;padding-bottom:80px}.bg___7ImRl .goodsTop___3DeSH{width:100%;background-color:#fff}.bg___7ImRl .goodsTop___3DeSH .goodsImg___1-y8x{width:96%;margin:0 auto;height:240px;border-bottom:1px solid #dedede;text-align:center;position:relative}.bg___7ImRl .goodsTop___3DeSH .goodsImg___1-y8x .productImg___1FVKJ{width:45%;margin:0 auto}.bg___7ImRl .goodsTop___3DeSH .goodsImg___1-y8x .numDiv___2fbCb{width:100%;position:absolute;bottom:0}.bg___7ImRl .goodsTop___3DeSH .goodsImg___1-y8x .dayNum___1XiCn{width:110px;margin:0 auto;height:20px;line-height:20px;font-size:12px;color:#fff;background-color:#858585}.bg___7ImRl .goodsTop___3DeSH .proTitle___tzeLQ{width:100%;padding:15px 17px}.bg___7ImRl .goodsTop___3DeSH .proTitle___tzeLQ .titleTop___2YIE_{height:15px;line-height:15px;font-size:12px;color:#333}.bg___7ImRl .goodsTop___3DeSH .proTitle___tzeLQ .titleTop___2YIE_ .titieTxt___i9RIg{float:left}.bg___7ImRl .goodsTop___3DeSH .proTitle___tzeLQ .titleTop___2YIE_ .limitTxt___3w1wO{float:right}.bg___7ImRl .goodsTop___3DeSH .proTitle___tzeLQ .titleBottom___2zdln{height:40px;line-height:40px}.bg___7ImRl .goodsTop___3DeSH .proTitle___tzeLQ .titleBottom___2zdln .priceTxt___FHVjL{font-size:18px;color:#333;margin-right:5px}.bg___7ImRl .goodsTop___3DeSH .proTitle___tzeLQ .titleBottom___2zdln .priceImg___1_A5n{width:30px}.bg___7ImRl .goodsTop___3DeSH .proTitle___tzeLQ .titleBottom___2zdln .priceTxt1___nvbEq{color:#666;font-size:12px;text-decoration:line-through;margin-left:25px}.bg___7ImRl .propertyDiv___1mF4g{width:100%;background-color:#fff;padding:15px 17px;font-size:14px;margin-top:10px}.bg___7ImRl .propertyDiv___1mF4g .num1___3-PZD{font-size:14px}.bg___7ImRl .propertyDiv___1mF4g .num2___1gcfe{color:#666}.bg___7ImRl .propertyDiv___1mF4g .numSelect___1_Nhy{height:40px;padding:5px 0}.bg___7ImRl .propertyDiv___1mF4g .numSelect___1_Nhy span{float:left;width:30px;height:30px;border:1px solid #999;border-radius:3px;margin:0 3px;margin-top:5px;text-align:center;line-height:30px}.bg___7ImRl .propertyDiv___1mF4g .numSelect___1_Nhy .productNum___QQKmY{outline:none;float:left;width:40px;height:30px;border:1px solid #999;border-radius:3px;margin:0 3px;margin-top:5px;text-align:center;line-height:30px}.bg___7ImRl .propertyDiv___1mF4g .propertyItem___20MjS .nump___1e88a{font-size:14px;margin-top:20px}.bg___7ImRl .propertyDiv___1mF4g .propertyItem___20MjS .propertyValue___2_Y8e{height:40px;padding:5px 0}.bg___7ImRl .propertyDiv___1mF4g .propertyItem___20MjS .propertyValue___2_Y8e .current___3tXlb,.bg___7ImRl .propertyDiv___1mF4g .propertyItem___20MjS .propertyValue___2_Y8e span{float:left;padding:0 10px;border:1px solid #999;border-radius:3px;margin:0 3px;margin-top:5px;text-align:center;line-height:30px}.bg___7ImRl .propertyDiv___1mF4g .propertyItem___20MjS .propertyValue___2_Y8e .current___3tXlb{background-color:#fe684b;color:#fff}.bg___7ImRl .detailImg___XnjND{background:#fff}.bg___7ImRl .detailImg___XnjND .infoTitle___3VZcU{padding-left:20px;margin-bottom:10px;margin-top:10px;padding-top:10px}.bg___7ImRl .detailImg___XnjND .infoContent___25Lvo{padding:0 20px}.bg___7ImRl .detailImg___XnjND .infoContent___25Lvo img{width:100%}.bg___7ImRl .Botton___r8WIW{position:fixed;width:100%;height:80px;bottom:0;text-align:center;background-color:#fff;padding-top:15px}.bg___7ImRl .Botton___r8WIW p{width:80%;margin:0 auto;height:46px;line-height:46px;background-color:#fe684b;color:#fff;border-radius:28px;box-shadow:0 5px 2px #fea999}.bg___7ImRl .BottonNo___7DtfO{position:fixed;width:100%;height:80px;bottom:0;text-align:center;background-color:#fff;padding-top:15px}.bg___7ImRl .BottonNo___7DtfO p{width:80%;margin:0 auto;height:46px;line-height:46px;background-color:#ccc;color:#fff;border-radius:28px;box-shadow:0 5px 2px #ddd}.bg___7ImRl .none___2BP7M{display:none}",""]),t.locals={bg:"bg___7ImRl",goodsTop:"goodsTop___3DeSH",goodsImg:"goodsImg___1-y8x",productImg:"productImg___1FVKJ",numDiv:"numDiv___2fbCb",dayNum:"dayNum___1XiCn",proTitle:"proTitle___tzeLQ",titleTop:"titleTop___2YIE_",titieTxt:"titieTxt___i9RIg",limitTxt:"limitTxt___3w1wO",titleBottom:"titleBottom___2zdln",priceTxt:"priceTxt___FHVjL",priceImg:"priceImg___1_A5n",priceTxt1:"priceTxt1___nvbEq",propertyDiv:"propertyDiv___1mF4g",num1:"num1___3-PZD",num2:"num2___1gcfe",numSelect:"numSelect___1_Nhy",productNum:"productNum___QQKmY",propertyItem:"propertyItem___20MjS",nump:"nump___1e88a",propertyValue:"propertyValue___2_Y8e",current:"current___3tXlb",detailImg:"detailImg___XnjND",infoTitle:"infoTitle___3VZcU",infoContent:"infoContent___25Lvo",Botton:"Botton___r8WIW",BottonNo:"BottonNo___7DtfO",none:"none___2BP7M"}},1980:function(e,t,o){e.exports=o.p+"static/media/product.6c735755.png"},2328:[2551,1461]});