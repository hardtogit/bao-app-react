webpackJsonp([114],{15:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".page___2x0RP{position:absolute;top:0;left:0;height:100vh;width:100%;overflow:hidden}",""]),t.locals={page:"page___2x0RP"}},16:[2322,15],19:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),s=n(16),l=a(s);t["default"]=function(e){return function(t){return r["default"].createElement("div",{className:l["default"].page},r["default"].createElement(e,t))}}},49:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,"a{text-decoration:none}.ml0___26vaQ{margin-left:0}.mt15___35Rs9{margin-top:15px}.mt30___OrVm4{margin-top:30px}.topBar___Pk-GL{display:-webkit-box;display:-ms-flexbox;display:box;display:flex;padding-left:15px;padding-right:15px;margin-top:14px}.topBarLeft___2TWUf{text-align:left;color:#00a6e2}.topBarLeft___2TWUf,.topBarRight___1GNjc{-webkit-box-flex:1;-o-box-flex:1;box-flex:1;-ms-flex:1;flex:1;font-size:16px}.topBarRight___1GNjc{text-align:right}.markTitle___1DU2v{margin-top:34px;margin-bottom:40px;font-size:25px;color:#000;text-align:center;display:block}.panel___1TQF9{display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-orient:vertical;-o-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;background-color:#f0eff5;padding-top:44px}.panelContent___2-VJ3{-webkit-box-flex:1;-o-box-flex:1;box-flex:1;-ms-flex:1;flex:1;overflow-y:scroll}.buttonWrap___xK3fa{margin-top:40px;margin-left:15px;margin-right:15px}.loading___3vaX4{width:100%;text-align:center;color:#fff;font-size:18px}.loading___3vaX4,.loading___3vaX4>span{display:inline-block}.center___xD4uH{text-align:center}.content___SZovH{position:absolute;left:0;padding-top:44px;top:0;width:100%;height:100%;background-color:#fff}.tip___GGjLC{left:0}",""]),t.locals={ml0:"ml0___26vaQ",mt15:"mt15___35Rs9",mt30:"mt30___OrVm4",topBar:"topBar___Pk-GL",topBarLeft:"topBarLeft___2TWUf",topBarRight:"topBarRight___1GNjc",markTitle:"markTitle___1DU2v",panel:"panel___1TQF9",panelContent:"panelContent___2-VJ3",buttonWrap:"buttonWrap___xK3fa",loading:"loading___3vaX4",center:"center___xD4uH",content:"content___SZovH",tip:"tip___GGjLC"}},50:function(e,t,n){var a=n(49);"string"==typeof a&&(a=[[e.id,a,""]]);n(7)(a,{});a.locals&&(e.exports=a.locals)},1111:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=(0,p["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f["default"]?(0,f["default"])(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),i=a(l),u=n(5),f=a(u),c=n(3),p=a(c),_=n(4),d=a(_),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,i["default"])(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),x=n(1),g=a(x),h=n(11),b=n(8),v=a(b),k=n(91),E=a(k),S=n(12),y=a(S),U=n(2211),w=a(U),T=n(50),C=a(T),N=n(19),R=a(N),B=n(32),I=n(10),L=n(69),D=a(L),G=n(26),W=a(G),M=n(83),O=a(M),P=n(22),V=a(P),j=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||(0,d["default"])(t)).call(this,e));return n.loadDom=function(){return g["default"].createElement(V["default"],null)},n.loadEndDom=function(e){var t=e.data,a=t.isSetUsername,o=t.username,r=void 0;return a||(r=n.setUserDom(o)),r},n.setUserDom=function(e){return g["default"].createElement("div",null,g["default"].createElement("div",{onClick:function(){return n.refs.username.focus()},className:(0,v["default"])(C["default"].bg,C["default"].panelContent)},g["default"].createElement(E["default"],{className:C["default"].mt15,ref:"username",placeholder:"4~26位字符，支持中英文，数字，_和@",defaultValue:e,onChange:function(e){n.setState({usernames:e})},maxLength:26})),g["default"].createElement(D["default"],{ref:"confirm"}))},n.componentWillReceiveProps=function(e){var t=e.setUsernameResponseCode,a=e.datas,o=e.setUsernamePending,r=n.refs.alert;if(a){if(a.data.isSetUsername&&n.state.init)return r.show({content:"您已设置过一次，不能重复设置",okText:"确定",okCallback:function(){return n.props.pop()}}),!1;n.state.init&&n.setState({username:a.data.usernames}),n.setState({init:!1})}100===t&&n.state.setting&&!o&&(n.props.setUsernameSuccess(n.state.usernames,n),n.props.pop()),300!==t||o||r.show({content:"设置用户名失败，请重试",okText:"确定"}),301!==t||o||n.refs.alert.show({content:"您已设置过一次，不能重复设置",okText:"确定",okCallback:function(){return n.props.pop()}}),302!==t||o||r.show({content:"用户名包含有特殊字符",okText:"确定"}),303!==t||o||r.show({content:"用户名被占用",okText:"确定"})},n.canSave=function(){return!(!n.state.usernames||""==n.state.usernames||n.state.usernames==n.props.datas.data.username)&&(n.state.usernames.length>=4&&n.props.usernames!=n.state.usernames&&n.state.usernames.length<=26)},n.save=function(){n.canSave()&&n.refs.confirm.show({title:"",content:"用户名设置成功后不可修改",okText:"确定",okCallback:function(){n.props.setUsernameRequest(n.state.usernames,n)},cancelText:"取消",cancelCallback:function(){}})},n.onValid=function(){n.refs.form.getValue()},n.onInvalid=function(e,t,n){},n.state={init:!0,setting:!1,usernames:""},n}return s(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.datas,a=t.load;n?n.data.isSetUsername?this.refs.alert.show({content:"您已设置过一次，不能重复设置",okText:"确定",okCallback:function(){return e.props.pop()}}):this.setState({usernames:n.data.username}):a(),this.refs.username&&this.refs.username.focus()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){this.refs.username&&this.refs.username.focus()}},{key:"render",value:function(){var e=this.props,t=e.setUsernamePending,n=e.datas,a=void 0;return a=n?n.data.isSetUsername?"":this.loadEndDom(n):this.loadDom(),g["default"].createElement("div",{className:C["default"].panel},g["default"].createElement(y["default"],{onLeft:this.props.pop,title:"用户名",rightNode:g["default"].createElement("span",{onClick:this.save,className:(0,v["default"])(w["default"].saveBtn,!this.canSave()&&w["default"].disable)},t?g["default"].createElement(O["default"],{color:"rgba(255,255,255,.8)"}):"保存")}),a,g["default"].createElement(W["default"],{ref:"alert"}))}}]),t}(g["default"].Component),H=function(e){return{datas:e.infodata.getIn(["USER_INFO_WITH_LOGIN","data"]),setUsernamePending:e.infodata.getIn([B.SET_USERNAME,"pending"]),setUsernameResponseCode:e.infodata.getIn([B.SET_USERNAME,"data"])&&+e.infodata.getIn([B.SET_USERNAME,"data"]).code||0}},Q=function(e){return{load:function(){e({type:"USER_INFO_WITH_LOGIN"})},pop:function(){e((0,I.go)(-1))},setUsernameRequest:function(t,n){e({type:B.SET_USERNAME,params:[t]}),n.setState({setting:!0})},setUsernameSuccess:function(t,n){e({type:B.SET_USERNAME_SUCCESS,key:"USER_INFO_WITH_LOGIN",data:{username:t,isSetUsername:!0}}),n.setState({setting:!1})}}};t["default"]=(0,h.connect)(H,Q)((0,R["default"])(j))},1613:function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".saveBtn___NmtYC{-webkit-transition:color .5s ease;transition:color .5s ease}.disable___12tQV{color:#d9d9d9}",""]),t.locals={saveBtn:"saveBtn___NmtYC",disable:"disable___12tQV"}},2211:function(e,t,n){var a=n(1613);"string"==typeof a&&(a=[[e.id,a,""]]);n(7)(a,{});a.locals&&(e.exports=a.locals)}});