webpackJsonp([148],{315:function(t,e,n){t.exports=n.p+"static/media/good.a34eb803.png"},494:function(t,e,n){t.exports=n.p+"static/media/notice.1bf1b311.png"},1083:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=(0,p["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s["default"]?(0,s["default"])(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var d=n(2),_=a(d),r=n(5),s=a(r),u=n(3),p=a(u),c=n(58),f=a(c),b=n(4),x=a(b),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,_["default"])(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),k=n(1),h=a(k),g=n(12),E=a(g),C=n(10),v=n(2110),N=a(v),S=n(8),y=a(S),T=n(11),A=n(22),B=a(A),I=n(26),w=a(I),L=n(1717),D=a(L),q=n(83),O=a(q),z=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||(0,x["default"])(e)).call(this,t));return n.nullCard=function(t,e,a){var o=n.state,i=o.reg,l=o.code,d=o.bankName,_=o.Val,r=o.icon,s=void 0,u=void 0,p=void 0;101==e.code||301==e.code?(s=d,u=_,p=h["default"].createElement("img",{src:r})):(s="请选择银行",p=h["default"].createElement("span",{className:N["default"].inputTitleC},"卡类型")),""!=d?(s=d,p=h["default"].createElement("img",{src:r})):(s="请选择银行",p=h["default"].createElement("span",{className:N["default"].inputTitleC},"卡类型"));var c=void 0,f=void 0;return a?(c={position:"absolute",top:"0px",left:"0px"},f=function(){n.setState({TopInput:{top:"100%"}})}):f=n.props.pop,h["default"].createElement("div",null,h["default"].createElement(E["default"],{leftNode:h["default"].createElement("span",{className:N["default"].leftCav,onClick:f},"取消"),style:c},"银行卡"),h["default"].createElement("div",{className:N["default"].bankcardAddContent},h["default"].createElement("div",{className:N["default"].inputBox},h["default"].createElement("p",{className:N["default"].text},"请绑定持卡人本人银行卡"),h["default"].createElement("div",{className:(0,y["default"])(N["default"].inputOne,N["default"].mg)},h["default"].createElement("span",{className:N["default"].inputTitle},"持卡人"),h["default"].createElement("span",{className:N["default"].inputContent},t),h["default"].createElement("span",{className:N["default"].inputIcon})),h["default"].createElement("div",{className:(0,y["default"])(N["default"].inputOne,N["default"].mg)},h["default"].createElement("div",{className:N["default"].inputCh},h["default"].createElement("span",{className:N["default"].inputTitleC},"卡号"),h["default"].createElement("input",{className:N["default"].inputSr,placeholder:"请输入银行卡号",value:u,onChange:function(t){n.inputS(t,l)}})),h["default"].createElement("div",{className:N["default"].inputCh,onClick:n.showBank},p,h["default"].createElement("span",{className:N["default"].inputContent},s),h["default"].createElement("span",{className:N["default"].inputJt}))),h["default"].createElement("div",{className:N["default"].btBox},h["default"].createElement("button",{className:N["default"].bt,disabled:!i,ref:"send",onClick:function(){n.props.send(n.state)}},n.props.sendpending&&h["default"].createElement(O["default"],{color:"rgba(255,255,255,.8)"}),"下一步")))))},n.isCard=function(){return h["default"].createElement("div",{className:N["default"].sqBox},h["default"].createElement(E["default"],{onLeft:n.props.pop},"提交申请"),h["default"].createElement("div",{className:N["default"].bankcardAddContent},h["default"].createElement("div",{className:N["default"].sqText},h["default"].createElement("p",null,"联系客服提供以下资料"),h["default"].createElement("p",{className:N["default"].sqTel},h["default"].createElement("a",{href:"tel:028-966180"},"028-966180"))),h["default"].createElement("div",{className:N["default"].tsBox},h["default"].createElement("ul",null,h["default"].createElement("li",null,h["default"].createElement("img",{src:D["default"]}),h["default"].createElement("p",{className:N["default"].mg},"手持身份证"),h["default"].createElement("p",null,"正面照")),h["default"].createElement("li",null,h["default"].createElement("img",{src:D["default"]}),h["default"].createElement("p",{className:N["default"].mg},"手持新银行卡"),h["default"].createElement("p",null,"正面照")),h["default"].createElement("li",null,h["default"].createElement("img",{src:D["default"]}),h["default"].createElement("p",{className:N["default"].mg},"手持原卡注销"),h["default"].createElement("p",null,"证明正面照")))),h["default"].createElement("div",{className:N["default"].btBox},h["default"].createElement("button",{className:N["default"].bt,onClick:n.props.pop},"确认"),h["default"].createElement("button",{className:N["default"].bt1,onClick:function(){n.setState({TopInput:{top:"0px"}})}},"重新更换安全卡"))))},n.loadEndDom=function(t,e){var a=t.data,o=a.name,i=a.isAuth,l=a.isbindSecurityCard,d=n.state.TopInput,_=void 0;return _=2!=i||l?2==i&&l?h["default"].createElement("div",null,h["default"].createElement("div",{className:N["default"].bankInput,style:d},n.nullCard(o,e,d)),n.isCard()):"":n.nullCard(o,e)},n.setS=function(t){101!=t.code&&301!=t.code||n.setState({code:t.data.code,bankName:t.data.name,icon:t.data.icon,Val:t.data.number})},n.showBank=function(){n.setState({Top:{top:"0px"}})},n.hiddenBank=function(){n.setState({Top:{top:"100%"}})},n.chooseBank=function(t,e,a){var o=n.state.Val;n.setState({code:t,Top:{top:"100%"},icon:e,bankName:a}),n.reg(o,t)},n.inputS=function(t,e){var a=t.target.value,o=/^\d/;if(n.setState({Val:a}),o.test(a)&&a.length>=6){var i=a.substring(0,6);n.verification(i)}else(!o.test(a)||a.length<6)&&n.setState({bankName:""});n.props.user.data.isbindSecurityCard?n.reg(a,e):n.regNull(a)},n.regNull=function(t){var e=/^(\d{16}|\d{19})$/;e.test(t)?n.setState({reg:!0}):n.setState({reg:!1})},n.verification=function(t){for(var e=n.props.bankList.data,a=0;a<e.length;a++)if(e[a].bin.indexOf(t)!=-1){n.setState({bankName:e[a].name,icon:e[a].icon,code:e[a].code});break}},n.reg=function(t,e){var a=/^(\d{16}|\d{19})$/;a.test(t)&&0!=e?101==n.props.data.code?t!=n.props.data.data.number&&n.setState({reg:!0}):n.setState({reg:!0}):n.setState({reg:!1})},n.state={bankName:"",Top:{top:"100%"},TopInput:{top:"100%"},code:0,icon:"",Val:"",reg:!1,init:!0,sendInit:!0},n}return l(e,t),m(e,[{key:"loadDom",value:function(t){return t?h["default"].createElement(B["default"],{style:t}):h["default"].createElement(B["default"],null)}},{key:"bankListDom",value:function(t){var e=this;return h["default"].createElement("div",{className:N["default"].bankContent},h["default"].createElement("ul",{className:N["default"].bankList},t.data.map(function(t,n){var a=t.icon,o=t.name,i=t.code;return h["default"].createElement("li",{className:N["default"].bank,key:n,onClick:function(){e.chooseBank(i,a,o)}},h["default"].createElement("span",{className:N["default"].bankImg},h["default"].createElement("img",{src:a})),h["default"].createElement("span",{className:N["default"].bankText},o),i==e.state.code&&h["default"].createElement("span",{className:N["default"].choosed}))})))}},{key:"Alert",value:function(){var t=this;this.refs.alert.show({content:"您还未绑定身份信息，去绑定？",okText:"确定",okCallback:function(){t.props.push("/user/setting/identityAuth")}})}},{key:"componentDidMount",value:function(){var t=this.props,e=t.user,n=t.load,a=t.loadCard,o=t.bankList;e?2!=e.data.isAuth&&this.Alert():n("USER_INFO_WITH_LOGIN"),a(),o||n("GET_BANK_LIST")}},{key:"componentWillReceiveProps",value:function(t){var e=this,n=t.user,a=t.data,o=t.senddata,i=t.sendpending,l=this.refs.alert;if(n&&2!=n.data.isAuth&&this.Alert(),a&&this.state.init&&(this.setS(a),this.setState({init:!1})),o){if(101==o.code&&this.state.sendInit&&!i){this.props.sendBank(this.state);var d=JSON.parse(sessionStorage.getItem("bao-user"));l.show({content:"申请安全卡成功",okText:"确定",okCallback:function(){e.props.push("/user/setting")}}),this.setState({sendInit:!1}),d.isbindSecurityCard=!0,sessionStorage.setItem("bao-user",(0,f["default"])(d))}102!=o.code||i||l.show({content:"更改安全卡申请成功",okText:"确定",okCallback:function(){e.props.push("/user/setting")}}),302!=o.code||i||l.show({content:"此卡已经为安全卡",okText:"确定"}),303!=o.code||i||l.show({content:"申请安全卡失败",okText:"确定"}),305!=o.code||i||l.show({content:"更改安全卡申请失败",okText:"确定"}),304!=o.code||i||l.show({content:"该卡正在申请中 ",okText:"确定"}),301!=o.code||i||l.show({content:"考拉第三方认证失败",okText:"确定"})}}},{key:"componentWillUnmount",value:function(){this.props.clearData()}},{key:"render",value:function(){var t=this.props,e=t.user,n=t.data,a=t.bankList,o=this.state.Top,i={position:"absolute",top:"0px",left:"0px"},l={position:"absolute",left:"50%",top:"50%"},d=void 0,_=void 0;return d=e&&n?this.loadEndDom(e,n):this.loadDom(),_=a?this.bankListDom(a):this.loadDom(l),h["default"].createElement("div",null,d,h["default"].createElement("div",{className:N["default"].bankBox,style:o},h["default"].createElement(E["default"],{leftNode:h["default"].createElement("span",{className:N["default"].leftCav,onClick:this.hiddenBank},"取消"),style:i},"选择银行卡"),_),h["default"].createElement(w["default"],{ref:"alert"}))}}]),e}(k.Component),R=function(t,e){return{user:t.infodata.getIn(["USER_INFO_WITH_LOGIN","data"]),data:t.infodata.getIn(["SECURITY_CARD","data"]),bankList:t.infodata.getIn(["GET_BANK_LIST","data"]),senddata:t.infodata.getIn(["SEND_SEC_CARD","data"]),sendpending:t.infodata.getIn(["SEND_SEC_CARD","pending"])}},M=function(t,e){return{loadCard:function(){t({type:"SECURITY_CARD",params:[{type:2}]})},load:function(e){t({type:e})},send:function(e){t({type:"SEND_SEC_CARD",params:[{bankCard:e.Val,bankCode:e.code,bankName:e.bankName}]})},sendBank:function(e){var n=e.Val,a=e.code,o=e.bankName,i=e.icon;t({type:"IDENTITY_AUTH_SUCCESS",key:"SECURITY_CARD",data:{code:101,data:{number:n,code:a,name:o,icon:i}}})},push:function(e){t((0,C.push)(e))},pop:function(){t((0,C.goBack)())},clearData:function(){t({type:"CLEAR_INFO_DATA",key:"SEND_SEC_CARD"})}}};e["default"]=(0,T.connect)(R,M)(z)},1509:function(t,e,n){e=t.exports=n(6)(),e.push([t.id,'.leftCav___1LIyh{display:inline-block;vertical-align:middle;padding-left:8px;line-height:44px}.bankInput___22uD5{z-index:999;transition:all .5s linear;-moz-transition:all linear .5s;-webkit-transition:all .5s linear;-o-transition:all linear .5s}.bankInput___22uD5,.sqBox___3nLo4{position:absolute;width:100%;height:100%;background-color:#f0eff5;left:0}.sqBox___3nLo4{z-index:99}.bankcardAddContent___1SExb{width:100%;height:100%;position:absolute;padding-top:44px;overflow:auto}.bankcardAddContent___1SExb .inputBox___2vy-r{padding-top:15px}.bankcardAddContent___1SExb .inputBox___2vy-r .text___1pfhT{padding:0 15px;font-size:14px;color:#888}.bankcardAddContent___1SExb .inputBox___2vy-r .inputOne___1N1TM{padding:0 15px;border-top:1px solid #e4e4e4;border-bottom:1px solid #e4e4e4;background-color:#fff;position:relative;min-height:44px}.bankcardAddContent___1SExb .inputBox___2vy-r .inputOne___1N1TM .inputContent___25Jq1{display:inline-block;font-size:14px;line-height:44px;margin-left:55px}.bankcardAddContent___1SExb .inputBox___2vy-r .inputOne___1N1TM .inputTitle___35U7q{position:absolute;left:15px;line-height:44px}.bankcardAddContent___1SExb .inputBox___2vy-r .inputOne___1N1TM .inputJt___3uqjA{width:18px;height:18px;position:absolute;right:-6px;top:50%;margin-top:-12px}.bankcardAddContent___1SExb .inputBox___2vy-r .inputOne___1N1TM .inputJt___3uqjA:after{content:"";display:inline-block;border-width:10px;border-color:transparent transparent transparent #fff;border-style:solid;position:absolute;right:-1px;top:2px}.bankcardAddContent___1SExb .inputBox___2vy-r .inputOne___1N1TM .inputJt___3uqjA:before{content:"";display:inline-block;border-width:12px;border-color:transparent transparent transparent #ccc;border-style:solid}.bankcardAddContent___1SExb .inputBox___2vy-r .inputOne___1N1TM .inputTitleC___1NswC{position:absolute;left:0;line-height:44px}.bankcardAddContent___1SExb .inputBox___2vy-r .inputIcon___3Lr9P{position:absolute;right:15px;top:50%;width:24px;height:24px;margin-top:-12px;background:url('+n(494)+") 50% no-repeat;background-size:100% 100%}.bankcardAddContent___1SExb .inputBox___2vy-r .inputSr___2VIlW{border:0;padding-left:55px;font-size:14px;width:100%;outline:none;line-height:44px}.bankcardAddContent___1SExb .inputBox___2vy-r .inputCh___1GAUV{margin-bottom:12px;position:relative}.bankcardAddContent___1SExb .inputBox___2vy-r .inputCh___1GAUV>img{position:absolute;left:0;top:50%;width:30px;margin-top:-15px}.bankcardAddContent___1SExb .inputBox___2vy-r .mg___2orKl{margin-top:12px}.bankcardAddContent___1SExb .btBox___2GNIq{padding-left:15px;padding-right:15px;margin-top:12px}.bankcardAddContent___1SExb .bt___1ZMiA{width:100%;line-height:40px;text-align:center;background-color:#00a6e2;color:#fff;border:1px solid #00a6e2;border-radius:5px}.bankcardAddContent___1SExb .bt___1ZMiA[disabled]{border-color:#90d1ed;background-color:#90d1ed}.bankcardAddContent___1SExb .bt___1ZMiA>span{display:inline-block}.bankcardAddContent___1SExb .bt1___1ewY2{background-color:#fff;line-height:40px;text-align:center;border:1px solid #fff;border-radius:5px;margin-top:12px;width:100%}.bankcardAddContent___1SExb .sqText___3kSzA{margin-top:50px}.bankcardAddContent___1SExb .sqText___3kSzA>p{text-align:center;line-height:30px}.bankcardAddContent___1SExb .sqText___3kSzA>.sqTel___3Ts0T{font-size:14px}.bankcardAddContent___1SExb .tsBox___1syEz{padding:25px 15px}.bankcardAddContent___1SExb .tsBox___1syEz>ul{display:block;width:100%}.bankcardAddContent___1SExb .tsBox___1syEz>ul>li{display:inline-block;width:33.333%;padding:10px 8px}.bankcardAddContent___1SExb .tsBox___1syEz>ul>li>img{width:100%}.bankcardAddContent___1SExb .tsBox___1syEz>ul>li>p{text-align:center;font-size:12px;line-height:22px;color:#666}.bankcardAddContent___1SExb .mg___2orKl{margin-top:12px}.bankBox___161cX{position:absolute;width:100%;height:100%;background-color:#fff;left:0;top:0;z-index:999;transition:all .5s linear;-moz-transition:all linear .5s;-webkit-transition:all .5s linear;-o-transition:all linear .5s}.bankBox___161cX .bankContent___1xCvi{position:absolute;padding-top:44px;width:100%;height:100%;overflow:auto}.bankBox___161cX .bankContent___1xCvi .bankList___aR0e5{display:block;width:100%;padding:12px 15px}.bankBox___161cX .bankContent___1xCvi .bankList___aR0e5 .bank___2ONns{width:100%;display:inline-block;padding:5px 0;border-bottom:1px solid #ddd;position:relative}.bankBox___161cX .bankContent___1xCvi .bankList___aR0e5 .bank___2ONns .bankImg___1WMLm{display:inline-block;width:30px;vertical-align:middle}.bankBox___161cX .bankContent___1xCvi .bankList___aR0e5 .bank___2ONns .bankImg___1WMLm>img{width:100%}.bankBox___161cX .bankContent___1xCvi .bankList___aR0e5 .bank___2ONns .bankText___15itx{margin-left:8px}.bankBox___161cX .bankContent___1xCvi .bankList___aR0e5 .bank___2ONns .choosed___VaJoi{display:inline-block;width:16px;height:16px;background:url("+n(315)+") 50% no-repeat;background-size:100% 100%;position:absolute;right:15px;top:50%;margin-top:-8px}",""]),e.locals={leftCav:"leftCav___1LIyh",bankInput:"bankInput___22uD5",sqBox:"sqBox___3nLo4",bankcardAddContent:"bankcardAddContent___1SExb",inputBox:"inputBox___2vy-r",text:"text___1pfhT",inputOne:"inputOne___1N1TM",inputContent:"inputContent___25Jq1",inputTitle:"inputTitle___35U7q",inputJt:"inputJt___3uqjA",inputTitleC:"inputTitleC___1NswC",inputIcon:"inputIcon___3Lr9P",inputSr:"inputSr___2VIlW",inputCh:"inputCh___1GAUV",mg:"mg___2orKl",btBox:"btBox___2GNIq",bt:"bt___1ZMiA",bt1:"bt1___1ewY2",sqText:"sqText___3kSzA",sqTel:"sqTel___3Ts0T",tsBox:"tsBox___1syEz",bankBox:"bankBox___161cX",bankContent:"bankContent___1xCvi",bankList:"bankList___aR0e5",bank:"bank___2ONns",bankImg:"bankImg___1WMLm",bankText:"bankText___15itx",choosed:"choosed___VaJoi"}},1717:function(t,e,n){t.exports=n.p+"static/media/changeCard1.00fa55f0.png"},2110:[2319,1509]});